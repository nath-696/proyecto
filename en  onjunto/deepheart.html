<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>CORE — Experiencia Completa</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #E67882;
      --secondary: #E7ABAF;
      --bg: #FFF0F3;
      --text: #0F172A;
      --radius: 12px;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; }
    a { text-decoration: none; color: inherit; }
    button { font: inherit; cursor: pointer; }

    /* NAV */
    .navbar { display: flex; justify-content: space-between; align-items: center; padding: 16px 32px; background: white; box-shadow: var(--shadow); position: sticky; top: 0; z-index: 100; }
    .logo { display: flex; align-items: center; }
    .logo img { height: 48px; margin-right: 12px; }
    .logo span { font-size: 1.8rem; font-weight: 700; color: var(--primary); }
    nav ul { display: flex; gap: 24px; list-style: none; }
    nav a { font-weight: 500; padding: 6px 8px; border-radius: 6px; transition: background .2s; }
    nav a:hover { background: var(--secondary); }
    .signup-btn { background: var(--primary); color: white; padding: 10px 18px; border-radius: var(--radius); border: none; font-weight: 600; transition: background .2s; }
    .signup-btn:hover { background: #c56075; }

    
    /* HERO */
    .hero { display: grid; grid-template-columns: 1.1fr .9fr; align-items: center; gap: 32px; background: var(--primary); color: white; padding: 80px 20px; border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius); }
    .hero h1 { font-size: 2.6rem; margin-bottom: 16px; }
    .hero p { font-size: 1.2rem; margin: 0 auto 24px; max-width: 600px; }
    .hero .btn { background: white; color: var(--primary); padding: 12px 30px; border: none; border-radius: var(--radius); font-weight: 600; transition: opacity .2s; }
    .hero .btn:hover { opacity: 0.9; }

    /* VISOR en HERO */
    .result-viewer { position:relative; z-index:1; width:min(560px,100%); margin-top:20px; }
    .result-frame { width:100%; height:clamp(260px,40vw,420px); background:#f3e6e9; border:1px dashed var(--secondary); border-radius:20px; display:grid; place-items:center; overflow:hidden; }
    .result-frame img { max-width:100%; max-height:100%; object-fit:contain; display:block; }
    #togglePrev { display:block; margin:10px auto 0; background:#fff; color:#7a3340; border:1px solid var(--secondary); padding:8px 14px; border-radius:10px; font-weight:600; }
    #togglePrev[disabled]{ opacity:.55; cursor:not-allowed; }

    /* LAYOUT */
    section { padding: 60px 20px; }
    .section-white { background: white; margin: 40px auto; border-radius: var(--radius); box-shadow: var(--shadow); max-width: 1100px; }
    .cards, .dashboard-grid, .grid-services, .gallery-grid { display: grid; gap: 20px; }
    .cards { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); padding: 40px; }
    .card, .service-card, .photo { background: var(--bg); border-radius: var(--radius); box-shadow: var(--shadow); padding: 20px; text-align: center; transition: transform .2s; }
    .card:hover, .service-card:hover { transform: translateY(-4px); }
    .card h3, .service-card h3 { color: var(--primary); margin-bottom: 12px; }
    .card button, .more-toggle { background: var(--primary); color: white; border: none; padding: 10px 16px; border-radius: var(--radius); font-weight: 600; transition: background .2s; }
    .card button:hover, .more-toggle:hover { background: var(--secondary); }

    /* DASHBOARD */
    .dashboard .header { text-align: center; padding: 0 20px 20px; }
    .dashboard-title { font-size: 2.2rem; font-weight: 700; color: #aa4465; margin-bottom: 10px; letter-spacing: -.5px; }
    .dashboard-subtitle { max-width: 820px; margin: 0 auto 30px; color: #5b2a3e; }
    .dashboard-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); max-width: 1200px; margin: 0 auto; }
    .card.wide { grid-column: span 2; }
    canvas { display: block; margin: 20px auto; max-width: 92%; }

    /* PIPELINE */
    .pipeline-section { background: white; padding: 60px 20px; text-align: center; }
    .pipeline-section h2 { color: #aa4465; margin-bottom: 36px; }
    .pipeline-timeline { max-width: 800px; margin: 0 auto; position: relative; padding-left: 30px; border-left: 4px solid #ebcaed; }
    .pipeline-step { position: relative; margin-bottom: 40px; padding-left: 20px; text-align: left; }
    .pipeline-step .circle { position: absolute; left: -42px; top: 0; width: 32px; height: 32px; background: #fadcf1; border: 2px solid #aa4465; border-radius: 50%; line-height: 30px; text-align: center; font-weight: 700; color: #aa4465; }
    .pipeline-step h3 { margin: 0; color: #aa4465; font-size: 1.1rem; }
    .pipeline-step p { margin: 8px 0 0; color: #555; }

    /* INFO & SERVICES */
    .info .info-box { background: var(--bg); padding: 24px; border-radius: var(--radius); box-shadow: var(--shadow); }
    .grid-services { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .service-icon { font-size: 1.5rem; color: var(--primary); margin-bottom: 12px; }
    .service-card .more { max-height: 0; overflow: hidden; transition: max-height .3s, padding .3s; padding: 0 14px; text-align: left; }
    .service-card.open .more { max-height: 420px; padding: 12px; }

    /* ===== GALLERY (adaptar a tamaños variados sin deformar) ===== */
    .gallery-grid{
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap:16px;
      padding:20px;
      max-width:1100px;
      margin:0 auto 60px;
    }
    .photo{
      background:#fff;
      border:1px solid #e8e8ee;
      border-radius:16px;
      padding:12px;
      text-align:center;
      box-shadow: 0 2px 6px rgba(0,0,0,.04);
    }
    .photo img{
      display:block;
      width:100%;
      height:auto;          /* mantiene proporción */
      max-height:320px;     /* límite para evitar “cards” gigantes */
      object-fit:contain;   /* se ve completa (puede dejar bandas) */
      object-position:center;
      background:#f6f6f6;   /* fondo neutro detrás si sobra espacio */
      border-radius:12px;
    }
    .caption { margin-top:8px; font-size:.92rem; font-weight:600; }

    /* OPCIONAL: mismo alto recortando (mosaico perfecto) */
    .photo.cover img{
      height:220px;         /* mismo alto en todas */
      object-fit:cover;     /* recorta lo que sobra */
    }
/* ==== AUTH DIALOG ==== */
.auth-dialog {
  border: none; border-radius: 16px; padding: 0; width: min(92vw, 420px);
  box-shadow: 0 10px 40px rgba(0,0,0,.20);
}
.auth-dialog::backdrop { background: rgba(0,0,0,.35); }
#authForm { padding: 20px; display: grid; gap: 12px; }
#authForm h3 { margin: 0 0 6px; color: #aa4465; }
#authForm label { display: grid; gap: 6px; font-size: .95rem; }
#authForm input {
  padding: 10px 12px; border:1px solid #e6d5db; border-radius: 10px; outline: none;
}
.btn-auth {
  background: var(--primary); color:#fff; border:none; padding:10px 14px;
  border-radius: 12px; font-weight:700; cursor:pointer;
}
.auth-switch { font-size: .9rem; text-align:center; margin: 2px 0 0; }
.auth-switch a { color: var(--primary); font-weight: 700; }
.auth-msg { min-height: 18px; font-size:.9rem; color:#7a3340; }
.auth-close {
  background: #f1e6e9; border: none; padding: 8px 10px; border-radius: 10px;
}
#signOutBtn { display:none; margin-left: 10px; background: #5b2a3e; }

    /* Animaciones opcionales */
    @keyframes fade-in { 0%{opacity:0;transform:translateY(20px)} 100%{opacity:1;transform:translateY(0)} }
    .animated { animation-duration: 1s; animation-fill-mode: both; }
    .fade-in { animation-name: fade-in; }

    @media (max-width: 960px) {
      .hero { grid-template-columns: 1fr; text-align:center; }
      .hero h1 { font-size: 2rem; }
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="navbar">
    <div class="logo">
      <img src="logo1.png" alt="CORE Logo" />
      <span>CORE</span>
    </div>
    <nav>
      <ul>
        <li><a href="#hero">Inicio</a></li>
        <li><a href="#dashboard">Health Data</a></li>
        <li><a href="#services">Servicios</a></li>
        <li><a href="#gallery">Galería</a></li>
      </ul>
    </nav>
    <button class="signup-btn">Regístrate</button>
  </header>
<!-- AUTH DIALOG -->
<dialog id="authDialog" class="auth-dialog">
  <form id="authForm" method="dialog">
    <h3 id="authTitle">Crear cuenta</h3>
    <label>
      <span>Correo</span>
      <input type="email" id="authEmail" required>
    </label>
    <label>
      <span>Contraseña (≥ 6)</span>
      <input type="password" id="authPass" minlength="6" required>
    </label>

    <button type="submit" class="btn-auth">Crear cuenta</button>
    <p class="auth-switch">
      <span>¿Ya tienes cuenta?</span>
      <a href="#" id="toggleAuth">Iniciar sesión</a>
    </p>
    <p id="authMsg" class="auth-msg"></p>
    <button type="button" id="closeAuth" class="auth-close">Cerrar</button>
  </form>
</dialog>

  <!-- HERO con visor -->
  <section class="hero" id="hero">
    <div>
      <h1>Sistema Inteligente para la Detección de Cáncer de Mama</h1>
      <p>Precisión, confiabilidad y asistencia médica en tiempo real con IA.</p>
      <button class="btn" onclick="document.getElementById('dashboard').scrollIntoView({behavior:'smooth'})">Explorar estadísticas</button>
    </div>
    <div>
      <div class="result-viewer">
        <div class="result-frame">
          <img id="resultImage" alt="Resultado de mamografía (predicción)">
        </div>
        <button id="togglePrev" disabled>Ver anterior</button>
      </div>
    </div>
  </section>

  <!-- CARDS -->
  <section class="section-white cards">
    <div class="card"><h3>Heart Failure</h3><p>Riesgo de insuficiencia cardíaca</p><button onclick="alert('Test Heart Failure')">Test</button></div>
    <div class="card"><h3>Cardiovascular</h3><p>Evaluación cardiovascular</p><button onclick="alert('Test Cardiovascular')">Test</button></div>
    <div class="card"><h3>Heart Attack</h3><p>Probabilidad de infarto</p><button onclick="alert('Test Heart Attack')">Test</button></div>
  </section>

  <!-- DASHBOARD -->
  <section class="section-white dashboard" id="dashboard">
    <div class="header animated fade-in">
      <h2 class="dashboard-title">📊 IA en la Salud del Futuro</h2>
      <p class="dashboard-subtitle">Explora cómo la IA transforma la atención médica: percepción pública, inversión tecnológica y proyección regional.</p>
    </div>
    <div class="dashboard-grid">
      <div class="card"><h3>Aceptación LatAm</h3><canvas id="chart1"></canvas></div>
      <div class="card"><h3>Inversión médica</h3><canvas id="chart2"></canvas><p class="card-text">Se proyectan USD 36 mil millones en 2025 (≈50% más que 2018).</p></div>
      <div class="card"><h3>IA en salud pública</h3><canvas id="chart3"></canvas></div>
      <div class="card"><h3>Confianza en México</h3><canvas id="chart4"></canvas><p class="card-text">México supera el promedio global en confianza para diagnóstico asistido por IA.</p></div>
      <div class="card wide"><h3>Impacto en decisiones</h3><canvas id="chart5"></canvas><p class="card-text">Sudamérica reporta ~18% más probabilidad de depender de IA en 10 años vs Europa.</p></div>
      <div class="card" style="grid-column:1/-1; text-align:left">
        <h3>📚 Fuentes</h3>
        <ul>
          <li><a href="https://business.yougov.com/es/content/47252-latam-aceptan-personas-uso-ia-salud" target="_blank">YouGov – IA en salud (LatAm)</a></li>
          <li><a href="https://www.caf.com/es/blog/como-puede-la-inteligencia-artificial-mejorar-la-salud-de-los-latinoamericanos/" target="_blank">CAF – IA y salud en Latinoamérica</a></li>
          <li><a href="https://www.unesco.org/es/artificial-intelligence/recommendation-ethics" target="_blank">UNESCO – Ética de la IA</a></li>
          <li><a href="https://www.datacentermarket.es/inteligencia-artificial/el-sector-sanitario-lidera-la-adopcion-de-la-inteligencia-artificial/" target="_blank">Data Center Market – Adopción IA</a></li>
        </ul>
      </div>
    </div>
  </section>

  <!-- PIPELINE -->
  <section class="section-white pipeline-section">
    <h2>Funcionamiento del Modelo</h2>
    <div class="pipeline-timeline">
      <div class="pipeline-step"><div class="circle">1</div><h3>Factibilidad</h3><p>Evaluación funcional del sistema IA.</p></div>
      <div class="pipeline-step"><div class="circle">2</div><h3>Entrenamiento</h3><p>Modelos entrenados con YOLOv8 y datos clínicos.</p></div>
      <div class="pipeline-step"><div class="circle">3</div><h3>Automatización</h3><p>Procesamiento sin intervención manual.</p></div>
      <div class="pipeline-step"><div class="circle">4</div><h3>Procesamiento</h3><p>Análisis en &lt; 1 s con GPU.</p></div>
      <div class="pipeline-step"><div class="circle">5</div><h3>Monitoreo</h3><p>Verificación y métricas en tiempo real.</p></div>
    </div>
  </section>

  <!-- INFO -->
  <section class="section-white info" id="services">
    <div class="container">
      <h2>Evaluación mamaria: próximos pasos</h2>
      <div class="info-box">
        <p>Detección confiable, asistencia profesional y seguimiento personalizado para la salud mamaria.</p>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section class="section-white services">
    <div class="container">
      <h2>Casos observados</h2>
      <div class="grid-services">
        <div class="service-card"><div class="service-icon">✅</div><h3>Hallazgo benigno</h3><p>Alteración no cancerosa con rasgos tranquilos en imagen.</p><button class="more-toggle">Saber más</button><div class="more"><p>Seguimiento periódico y comparación con estudios previos.</p></div></div>
        <div class="service-card"><div class="service-icon">⚠️</div><h3>Hallazgo sospechoso</h3><p>Lesión con signos de alerta; requiere evaluación avanzada.</p><button class="more-toggle">Saber más</button><div class="more"><p>Puede requerir biopsia guiada por imagen.</p></div></div>
        <div class="service-card"><div class="service-icon">📊</div><h3>Factores de riesgo</h3><p>Elementos genéticos y ambientales.</p><button class="more-toggle">Saber más</button><div class="more"><p>Modificables y no modificables (edad, BRCA, densidad, etc.).</p></div></div>
        <div class="service-card"><div class="service-icon">🔎</div><h3>Atención temprana</h3><p>Consejos para detección y monitoreo continuo.</p><button class="more-toggle">Saber más</button><div class="more"><p>Consultar ante cambios claros o persistentes.</p></div></div>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="gallery" class="section-white">
    <div class="gallery-grid">
      <figure class="photo">
        <img src="../imagenes/detection1.png" alt="Imagen 1" loading="lazy">
        <figcaption class="caption">Imagen 1</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foto1.jpg" alt="Imagen 2" loading="lazy">
        <figcaption class="caption">Imagen 2</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foto2.jpg" alt="Imagen 3" loading="lazy">
        <figcaption class="caption">Imagen 3</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foto4.jpg" alt="Imagen 4" loading="lazy">
        <figcaption class="caption">Imagen 4</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foto5.jpg" alt="Imagen 5" loading="lazy">
        <figcaption class="caption">Imagen 5</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foto6.jpg" alt="Imagen 6" loading="lazy">
        <figcaption class="caption">Imagen 6</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foto7.jpg" alt="Imagen 7" loading="lazy">
        <figcaption class="caption">Imagen 7</figcaption>
      </figure>
      <figure class="photo">
        <img src="../imagenes/foyo8.jpg" alt="Imagen 8" loading="lazy">
        <figcaption class="caption">Imagen 8</figcaption>
      </figure>
    </div>
  </section>

  <script>
    /* ====== Toggle “Saber más” ====== */
    document.addEventListener('click', e => {
      const btn = e.target.closest('.more-toggle');
      if (!btn) return;
      const card = btn.closest('.service-card');
      card.classList.toggle('open');
      btn.textContent = card.classList.contains('open') ? 'Ver menos' : 'Saber más';
    });

    /* ====== Visor del HERO ====== */
    (function(){
      const imgEl  = document.getElementById('resultImage');
      const btn    = document.getElementById('togglePrev');
      const state = { original:null, predicted:null, showing:'predicted' };

      window.setResultImages = function(originalSrc, predictedSrc){
        state.original  = originalSrc || null;
        state.predicted = predictedSrc || originalSrc || null;
        state.showing   = 'predicted';
        imgEl.src = state.predicted || '';
        const canToggle = !!state.original && !!state.predicted && state.original !== state.predicted;
        btn.disabled = !canToggle;
        btn.textContent = 'Ver anterior';
      };

      btn?.addEventListener('click', function(){
        if(!state.original) return;
        if(state.showing === 'predicted'){
          imgEl.src = state.original;
          state.showing = 'original';
          btn.textContent = 'Ver resultado';
        }else{
          imgEl.src = state.predicted || state.original;
          state.showing = 'predicted';
          btn.textContent = 'Ver anterior';
        }
      });

      // DEMO: usa mismas rutas que la galería (carpeta ../imagenes/)
      setResultImages('../imagenes/original.jpg', '../imagenes/prediccion.png');
    })();

    /* ====== Charts ====== */
    const initChart = (id, type, labels, data, extra={}) => {
      const el = document.getElementById(id);
      if(!el) return;
      new Chart(el, {
        type,
        data: { labels, datasets: [{ data, label: extra.label || '', backgroundColor: extra.colors || ['#E67882','#E7ABAF','#F8C6CC','#FFF0F3'] }] },
        options: { responsive:true, plugins:{ legend:{ position:'bottom' } }, scales: extra.scales }
      });
    };

    initChart('chart1','pie',['LatAm','Saludables','No saludables'],[56.4,38.9,40.9]);
    initChart('chart2','bar',['2018','2025'],[24,36], { label:'USD miles de millones' });
    initChart('chart3','doughnut',['Saludables','No saludables'],[65,66.9]);
    initChart('chart4','bar',['México','Global'],[58.1,42]);
    initChart('chart5','bar',['Sur América','Asia-Pacífico','M.O. & África','Norteamérica','Europa'],[64,64,63,47,45], {
      scales: { y: { beginAtZero:true, max:80, ticks:{ stepSize:10 } } }
    });

    
  </script>
  <script type="module">
  // Firebase v12 (CDN ESM)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getAnalytics, isSupported as analyticsIsSupported } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";
  import {
    getAuth, onAuthStateChanged,
    createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut
  } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

  // === TU CONFIG ===
  const firebaseConfig = {
    apiKey: "AIzaSyB6tdpk1agA4eDxqEcWbeWEYZMQCjCKLiQ",
    authDomain: "core-873a4.firebaseapp.com",
    projectId: "core-873a4",
    storageBucket: "core-873a4.firebasestorage.app",
    messagingSenderId: "761268055814",
    appId: "1:761268055814:web:c89d588a0668745afeb887",
    measurementId: "G-H1K3K0XBN6"
  };

  // === INIT ===
  const app = initializeApp(firebaseConfig);
  try { if (await analyticsIsSupported()) getAnalytics(app); } catch(e) { /* opcional */ }
  const auth = getAuth(app);

  // === UI refs ===
  const signupBtn = document.querySelector('.signup-btn');     // botón "Regístrate" en navbar
  const signOutBtn = document.createElement('button');         // botón "Salir"
  signOutBtn.id = 'signOutBtn';
  signOutBtn.className = 'signup-btn';
  signOutBtn.textContent = 'Salir';
  document.querySelector('.navbar').appendChild(signOutBtn);

  const dlg = document.getElementById('authDialog');
  const form = document.getElementById('authForm');
  const emailEl = document.getElementById('authEmail');
  const passEl = document.getElementById('authPass');
  const titleEl = document.getElementById('authTitle');
  const msgEl = document.getElementById('authMsg');
  const toggleEl = document.getElementById('toggleAuth');
  const closeEl = document.getElementById('closeAuth');

  let mode = 'signup'; // 'signup' | 'signin'

  const setMode = (m) => {
    mode = m;
    titleEl.textContent = (m === 'signup') ? 'Crear cuenta' : 'Iniciar sesión';
    form.querySelector('.btn-auth').textContent = (m === 'signup') ? 'Crear cuenta' : 'Entrar';
    document.querySelector('.auth-switch span').textContent = (m === 'signup')
      ? '¿Ya tienes cuenta?' : '¿Aún no tienes cuenta?';
    toggleEl.textContent = (m === 'signup') ? 'Iniciar sesión' : 'Crear cuenta';
    msgEl.textContent = '';
  };

  // Abrir/cerrar
  signupBtn.addEventListener('click', () => {
    setMode('signup');
    dlg.showModal();
  });
  closeEl.addEventListener('click', () => dlg.close());
  toggleEl.addEventListener('click', (e) => {
    e.preventDefault();
    setMode(mode === 'signup' ? 'signin' : 'signup');
  });

  // Submit
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msgEl.textContent = 'Procesando…';
    try {
      const email = emailEl.value.trim();
      const pass = passEl.value;
      if (mode === 'signup') {
        await createUserWithEmailAndPassword(auth, email, pass);
        msgEl.textContent = 'Cuenta creada ✔';
      } else {
        await signInWithEmailAndPassword(auth, email, pass);
        msgEl.textContent = 'Sesión iniciada ✔';
      }
      setTimeout(() => dlg.close(), 600);
    } catch (err) {
      msgEl.textContent = (err?.message || 'Error de autenticación');
    }
  });

  // Cerrar sesión
  signOutBtn.addEventListener('click', async () => {
    try { await signOut(auth); } catch(e) {}
  });

  // Estado de sesión
  onAuthStateChanged(auth, (user) => {
    if (user) {
      signupBtn.textContent = user.email || 'Mi cuenta';
      signOutBtn.style.display = 'inline-block';
    } else {
      signupBtn.textContent = 'Regístrate';
      signOutBtn.style.display = 'none';
    }
  });
</script>

</body>
</html>
